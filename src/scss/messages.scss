$height-messages: calc(100vh - (#{$header-height} + #{$foter-height} + #{map-get($spacers, 4)}));
$height-messages-md: calc(100vh - (#{$header-height-md} + #{$foter-height} + #{map-get($spacers, 4)}));

$size-arrow-msg: 10px;
$size-img-msg: 40px;

.messages {
	height: $height-messages;
	max-height: 72rem;
	padding-bottom: 3rem;
	display: flex;
	align-items: flex-start;
	justify-content: space-between;

	@include media-breakpoint-down(md) {
		height: $height-messages-md;
	}
	@include media-breakpoint-down(sm) {
		margin-left: -($grid-gutter-width / 2);
		margin-right: -($grid-gutter-width / 2);
	}
	
	&-dialogs {
		min-width: 25rem;
		max-width: 34rem;
		width: 100%;
		height: 100%;
		overflow: hidden;
		position: relative;

		@include media-breakpoint-down(lg) {
			min-width: 8rem;
			width: 8rem;
		}
		@include media-breakpoint-down(sm) {
			min-width: 6rem;
			width: 6rem;
		}
	}

	&-chat {
		width: auto;
		height: 100%;
		overflow: hidden;
		position: relative;
		
		&-list {
			height: auto;
			min-height: calc(100% - 93px);
			max-height: calc(100% - 93px);
			overflow-y: scroll;
			overflow-x: hidden;
			
			.chat-item {
				display: flex;
				align-items: flex-end;
				padding: 1.5rem;
				margin: 0;
				width: 100%;

				@include media-breakpoint-down(sm) {
					flex-direction: column;
				}
				
				&.sent {
					justify-content: flex-end;

					img {
						order: 2;
						margin-left: 1.5rem;
					}
					p {
						order: 1;
						text-align: right;
						border-color: $info;
						
						&::before {
							border-left: $size-arrow-msg solid $info;
							right: -$size-arrow-msg;
						}
						&::after {
							border-left: ($size-arrow-msg - 1) solid $white;
							right: -($size-arrow-msg - 1);
						}
					}
				}
				&.replies {
					justify-content: flex-start;

					@include media-breakpoint-down(sm) {
						align-items: end;
					}

					img {
						order: 1;
						margin-right: 1.5rem;

						@include media-breakpoint-down(sm) {
							order: 2;
							margin-top: .5rem;
						}
					}
					p {
						order: 2;
						text-align: left;
						border-color: $gray-300;

						@include media-breakpoint-down(sm) {
							order: 1;
						}
						
						&::before {
							border-right: $size-arrow-msg solid $gray-300;
							left: -$size-arrow-msg;
						}
						&::after {
							border-right: ($size-arrow-msg - 1) solid $white;
							left: -($size-arrow-msg - 1);
						}
					}
				}
				img {
					border-radius: $border-radius;
					width: $size-img-msg;
					height: $size-img-msg;
					margin: 0;

					@include media-breakpoint-down(sm) {
						display: none;
					}
				}
				p {
					position: relative;
					padding: 1rem;
					margin: 0;
					border-radius: $border-radius;
					border: .1rem solid;
					font-size: 2rem;
					font-weight: 300;

					@include media-breakpoint-down(sm) {
						font-size: 1.7rem;
					}
					
					&::after,
					&::before {
						content: '';
						width: 0; 
						height: 0; 
						border-top: $size-arrow-msg solid transparent;
						border-bottom: $size-arrow-msg solid transparent;
						position: absolute;
					}
					&::before {
						bottom: ($size-img-msg / 2 - $size-arrow-msg);
					}
					&::after {
						border-top: ($size-arrow-msg - 1) solid transparent;
						border-bottom: ($size-arrow-msg - 1) solid transparent;
						bottom: ($size-img-msg / 2 - $size-arrow-msg + 1);
					}
				}
			}
		}
	}
}

.dialogs-list {
	height: 100%;
	overflow-y: scroll;
	overflow-x: hidden;
	
	.dialog-item {
		border: .1rem solid transparent;
		border-right: 0;
		position: relative;
		font-size: 1.8rem;
		margin: 0;
		cursor: pointer;
		transition: border .2s ease;

		@include media-breakpoint-down(sm) {
			border-left: 0;
		}
		@include hover-focus {
			border-color: $gray-300;
		}
		&.active {
			border-color: $component-active-bg;
		}
		.dialog-item-user {
			padding: 1rem;
			display: flex;
			align-items: center;
			
			span {
				@include media-breakpoint-down(lg) {
					display: none;
				}
			}
			img {
				border-radius: $border-radius;
				width: 4rem;
				height: auto;
			}
		}
		.dialog-item-msg {
			font-size: 1.4rem;
			margin: 0;
			padding: 0 1rem 1.5rem;
			transition: .8s all ease;

			@include media-breakpoint-down(lg) {
				display: none;
			}
		}
	}
}

.message-input {
	position: absolute;
	bottom: 0;
	width: 100%;
	z-index: 3;
	padding: 0 0 0 ($grid-gutter-width / 2);

	@include media-breakpoint-down(sm) {
		padding-right: ($grid-gutter-width / 2);
	}

	.form-control {
		font-weight: 300;
		height: $input-height;
		
		@include hover-focus {
			
		}
	}
	.btn {
		
		@include hover-focus {
			
		}
	}
}
